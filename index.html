<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bildområde Mätverktyg</title>
    <!-- Ladda Tailwind CSS från CDN för modern styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Länka till extern CSS-fil -->
    <link rel="stylesheet" href="styles.css">
</head>
<body class="bg-[var(--background)] text-[var(--foreground)] min-h-screen p-4 md:p-8 transition-colors duration-300">

    <div class="max-w-5xl mx-auto my-6 md:my-10 bg-[var(--card)] rounded-[var(--radius)] shadow-[var(--shadow-2xl)] overflow-hidden border border-[var(--border)]">
        
        <!-- Header-sektion -->
        <header class="bg-[var(--sidebar)] text-[var(--sidebar-foreground)] text-center p-6 md:p-8 border-b border-[var(--sidebar-border)] relative">
            <h1 class="text-3xl md:text-4xl font-extrabold mb-2">🖼️ Bildområde Mätverktyg</h1>
            <p class="text-lg text-[var(--sidebar-foreground)]/80">Välj en bild och dra för att mäta områden</p>
        </header>

        <!-- Instruktioner -->
        <div class="bg-[var(--muted)] border-l-4 border-[var(--primary)] p-4 m-4 md:m-6 rounded-[var(--radius)]">
            <h4 class="text-lg font-semibold text-[var(--primary)]">📋 Instruktioner:</h4>
            <ul class="list-disc list-inside text-[var(--muted-foreground)] mt-2">
                <li>Välj en bildfil från din dator.</li>
                <li>Ange bildens verkliga storlek i rullgardinsmenyn.</li>
                <li>Dra med musen på bilden för att välja ett område.</li>
                <li>**Efter att du har släppt musknappen, klicka och dra i urvalsrutan för att flytta den.**</li>
                <li>Måtten för det valda området visas i resultaten nedan.</li>
            </ul>
        </div>

        <div class="p-4 md:p-6 bg-[var(--background)] border-b border-[var(--border)] flex flex-col md:flex-row items-center justify-between gap-4">
            
            <!-- Filuppladdningsknapp -->
            <div class="relative overflow-hidden inline-block">
                <input type="file" id="imageInput" accept="image/*" class="absolute left-[-9999px]">
                <label for="imageInput" class="file-input-label bg-[var(--primary)] text-[var(--primary-foreground)] font-bold py-3 px-6 rounded-[var(--radius)] hover:bg-[var(--primary)]/90 transition-colors duration-200 cursor-pointer shadow-[var(--shadow-md)]">
                    📁 Välj Bild
                </label>
            </div>
            
            <!-- Rullgardinsmeny för bildstorlek -->
            <select id="imageSizeSelect" class="py-3 px-4 border border-[var(--input)] rounded-[var(--radius)] bg-[var(--input)] text-[var(--foreground)] focus:outline-none focus:ring-2 focus:ring-[var(--ring)] transition-colors duration-200">
                <option value="2688x1512">2688 × 1512 pixels</option>
                <option value="1920x1080" selected>1920 × 1080 pixels</option>
                <option value="1280x720">1280 × 720 pixels</option>
                <option value="1024x576">1024 × 576 pixels</option>
            </select>

            <!-- Knapp för att växla tema -->
            <button id="themeToggle" class="py-3 px-6 rounded-[var(--radius)] bg-[var(--secondary)] text-[var(--secondary-foreground)] hover:bg-[var(--secondary)]/80 transition-colors duration-200">
                Byt tema
            </button>
        </div>

        <!-- Bildcontainer med canvas och urvalsruta -->
        <div class="relative flex justify-center p-4 md:p-6 bg-[var(--muted)]">
            <canvas id="imageCanvas" class="border-2 border-[var(--border)] rounded-[var(--radius)] shadow-[var(--shadow-xl)] cursor-crosshair max-w-full h-auto"></canvas>
            <div class="selection-box absolute border-2 border-dashed border-[var(--destructive)] bg-[var(--destructive)] opacity-20 pointer-events-none hidden" id="selectionBox"></div>
        </div>

        <!-- Resultatsektion -->
        <div class="results p-6 border-t border-[var(--border)]">
            <h3 class="text-2xl font-bold text-[var(--foreground)] mb-4">📏 Resultat för valt område:</h3>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <div class="result-item bg-[var(--secondary)] text-[var(--secondary-foreground)] p-5 rounded-[var(--radius)] shadow-[var(--shadow-md)]">
                    <div class="text-sm opacity-90 mb-1">Bredd (Width)</div>
                    <div class="text-3xl font-extrabold" id="widthResult">-</div>
                </div>
                <div class="result-item bg-[var(--secondary)] text-[var(--secondary-foreground)] p-5 rounded-[var(--radius)] shadow-[var(--shadow-md)]">
                    <div class="text-sm opacity-90 mb-1">Höjd (Height)</div>
                    <div class="text-3xl font-extrabold" id="heightResult">-</div>
                </div>
                <div class="result-item bg-[var(--secondary)] text-[var(--secondary-foreground)] p-5 rounded-[var(--radius)] shadow-[var(--shadow-md)]">
                    <div class="text-sm opacity-90 mb-1">Position X</div>
                    <div class="text-3xl font-extrabold" id="xResult">-</div>
                </div>
                <div class="result-item bg-[var(--secondary)] text-[var(--secondary-foreground)] p-5 rounded-[var(--radius)] shadow-[var(--shadow-md)]">
                    <div class="text-sm opacity-90 mb-1">Position Y</div>
                    <div class="text-3xl font-extrabold" id="yResult">-</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Länka till extern JavaScript-fil -->
    <script src="script.js"></script>
</body>
</html>
